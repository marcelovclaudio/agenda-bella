# RabbitMQ configuration for Agenda Bella development environment

# Cluster and Node Configuration
cluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config

# Logging
log.console = true
log.console.level = info
log.file = false

# Default user and permissions
default_user = agenda_bella
default_pass = agenda_bella_dev_password
default_vhost = /agenda_bella
default_user_tags.administrator = true
default_permissions.configure = .*
default_permissions.read = .*
default_permissions.write = .*

# Network and Security
listeners.tcp.default = 5672
management.tcp.port = 15672
management.tcp.ip = 0.0.0.0

# Load definitions on startup
management.load_definitions = /etc/rabbitmq/definitions.json

# Memory and Disk Configuration
vm_memory_high_watermark.relative = 0.6
disk_free_limit.relative = 2.0

# Message TTL and Queue Settings
# Default message TTL: 24 hours
default_queue_type = classic

# Connection and Channel Limits
connection_max = 1000
channel_max = 2047

# Heartbeat
heartbeat = 60

# Consumer timeout (30 minutes for long-running jobs)
consumer_timeout = 1800000

# Management Plugin Configuration
management.rates_mode = basic
management.sample_retention_policies.global.minute = 5
management.sample_retention_policies.global.hour = 60
management.sample_retention_policies.global.day = 1440

# Development-specific settings
# Enable all management features
management.enable_queue_totals = true
management.enable_connection_totals = true

# Plugins (automatically loaded)
# rabbitmq_management
# rabbitmq_management_visualiser (optional)

# Background GC
background_gc_enabled = true
background_gc_target_interval = 60000

# Clustering (disabled for single-node development)
cluster_partition_handling = ignore

# Prometheus metrics (optional, for monitoring)
# prometheus.tcp.port = 15692